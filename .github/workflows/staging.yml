# This workflow will do a clean installation of node dependencies, cache/restore them, build the source code and run tests across different versions of node
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-nodejs

name: Check development branch 

on:
  pull_request:
    types: 
      - closed
    branches: 
      - "dev-jana" 
env:
  SSH_PRIVATE_KEY_SCRIPT: |
          -----BEGIN RSA PRIVATE KEY-----
            MIIEpAIBAAKCAQEAu3TYNTQb4wJl9Q3TwDSvAJoaC92qmQxRYz3t2jmW+6i4EBEU
            i9inuh4Z2tG20qs5H8t8xTTG+DZ9ryZJOU1MAZssXkDcMxBAKz829YCPQEqQ55Qn
            3X2kJdMU+qO0lNAdJHFEvNfi2reYESNqI+lqTUVdiFM2At/CeQBhb6X0WVZ689XF
            tXbLYZuUBU9OdjdK0sfmD8a3c+MnxAmN8n0DwasRuAULyH8CLAUYBxPFvc8nYeaB
            wqEsNvc6hJCXYqsGQIcSktxUTwnmpad2ubpwuU4TjgtL3tX3NLAGNwnPCvMyDrDq
            0nADHhgLvk7zrNCKINSRORfUPxd5HfwFfcphIQIDAQABAoIBAQCdbQ098RsSVCtH
            12rjWds2SDRjjq78hSm8jH+56u9vPUwGwjFdGIATf7/60nAVEBKTLxMDksUeIrT+
            aMrJwq54Etb5+MJ0Z8tcBmSjXGnxdi2nLfckvaUi1tghfWXkK7qtpiox5aPwRosA
            qZszuYy6g+x+1lLfqwbpE3bAisBgXR5CbTuvdBffrHLs1uCerLekDNUZTttoB0Mc
            T/g1AEnh1OjEzVCIO4GlLF/mnDYiX6OxWiayFZ9RZENNXGkYRgmG9TQETa74F4Wg
            uM9eaU0ZlXyXrXHrMrP7Fpxn4X37F2YfYgUq+wBUJ9jdVTo236o+x67DpmvY6dL2
            0U6ZS3l5AoGBAN0vAC+C7IUwKOTQvqMs1ysIVBz3q+RyovuJhyNhmFvuXAOwqXAr
            MISJgu/43PjcK5FBJjSQqHoO6LccKo0eX6TcH+NC7CSjx6boTF/Dz65v1rmgbB3l
            wdCDTCmI0YUKtOsYDVKFZ9Qz7CWYdFsFZic67tmDG82igBJyf/CKNoevAoGBANj2
            vtdXPXvcfpuNV2LD4ERT/9AsPsj2k9EoTvOW9yxN2V+RY+/VZsfUZgUs3aZBB5I3
            WRtcF6rSPdePu0mfwMMq+W1triQDh4u7ZBNdNe+fwUdazDTTdxRZWzG955bPccMF
            JoliUzGgL8OhJqXOtejRLj5JS8LkMg7zuljnlggvAoGBAM92CWeHFxBqNsFApr9p
            DL1ZR4QQLxPNDuB+g9oE7aK09WukpZkHea+nR8CMnb9yzA6nnA1L7irmlxNBgQvy
            hGWe7u38VICdemQsmY5tnPwR/McKGL8GRX+t159RrKxseXvViJFxfg0FUqeE0waZ
            DtMXLPeqSUbc9+HVsflNuo4TAoGABFBLlQ53+3lzzvXtcdpBIDqnUGVAzlAQukzZ
            3P/4ZBocI0lJul/8ziZL7PhqY77RPrf4/pFDKzNI5XtHFvylIXw+P025859aV43f
            PH9S7jO37QpCGx7FNFNee8uxyg7PzTfR/1NEIi10JaiTkyJb/YgDKlvctMBCuodg
            AhqAoiMCgYAMfjzBR40pdf4CbGwiGWm8B9LPmtaaLedvyMQN52OIYO63dnvvRZlo
            nay/c4zBbUboLbfGUy7c1OCD/dQvFD6u1e9AbxDXtGGsTRBjVpmpyobWH6k0JJ3X
            jNYzRk5jhL6n/i2W0XMMrUXbaxUVAYQnqnnQNPXz4iIDfNv5D/4vyg==
          -----END RSA PRIVATE KEY-----
  SERVER_USERNAME: ubuntu
  SERVER_IP: staging.cityfinance.in
      
jobs:
        test-ssh-connection:
          runs-on: ubuntu-latest
      
          steps:
            - name: Test SSH connection
              run: ssh -o BatchMode=yes -i <(echo "$SSH_PRIVATE_KEY_SCRIPT") $SERVER_USERNAME@$SERVER_IP exit